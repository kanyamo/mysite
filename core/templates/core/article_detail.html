{% extends "core/base/two_column_base.html" %}
{% load static %}
{% load editorjs %}
{% block title %}{{article.title}}{% endblock %}
{% block extra-styles %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'core/css/article_detail.css' %}">
<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
{% endblock %}
{% block column2-1 %}
    <div class="breadcrumb-list">
        {% for category in category_list %}
        <a class="crumb-list-item" href="{% url 'core:category' category.inner_name %}">{{ category.name }}</a> >  
        {% endfor %}
        <a class="crumb-list-item" href="#">{{ article.title }}</a>
    </div>
    <h1 class="title">{{article.title}}</h1>
    <div class="article-info">
        <div class="article-view-count">{{article.view_count}} views</div>
        <div class="article-pub-date">投稿日:{{article.pub_date.year}}/{{article.pub_date.month}}/{{article.pub_date.day}}, 更新日:{{article.renew_date.year}}/{{article.renew_date.month}}/{{article.renew_date.day}}</div>
    </div>
    <img class="thumbnail-image" src="{{article.thumbnail.url}}" alt="{{article.title}}">
    作者：{{ article.author.display_name }}<br>
    <!-- article.content でJSONを展開 -->
    <div id="article-content" class="article-content">
        {{ article.content | editorjs}}
    </div> <!-- このidはjsで使う -->
    {% if user.id == article.author.id %}
    <hr>
    <p style="text-align: center;">※以下の内容は作者としてログイン中のため表示されています。</p>
    <h2>このページのJSONデータ</h2>
    {{ article.content }}<br>
    <div class="article-edit-button__outer">
        <a href="{% url 'core:edit' article.pk %}" class="article-edit-link">
            <div class="article-edit-button">
                この記事を編集する
            </div>
        </a>
    </div>
    {% endif %}
{% endblock %}
{% block scripts %}
<!-- <script type="text/javascript">
    console.log('記事本文が読み込まれました');
    document.addEventListener('DOMContentLoaded', () => {
        var mj = document.createElement('script');
        mj.type = 'text/javascript';
        mj.async = true;
        mj.id = 'MathJax-script';
        mj.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
        document.head.appendChild(mj);  // mathjax遅延読み込み

        var tz = document.createElement('script');
        tz.type = 'text/javascript';
        tz.src = 'https://tikzjax.com/v1/tikzjax.js';
        document.head.appendChild(tz);  // TikZJax遅延読み込み
    });
</script> -->
{{ block.super }}
{% endblock %}